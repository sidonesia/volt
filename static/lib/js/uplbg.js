"use strict";export const fs={init:()=>{const rmx=document.querySelector("[data-remove-img]");rmx.addEventListener("click",e=>{e.target.nextElementSibling.src="";x.value="";imgContainer.nextElementSibling.classList.remove("D(n)");imgContainer.classList.add("D(n)")});const x=document.querySelector("#dataImg");x.addEventListener("change",e=>{const file=e.target.files[0];if(file.size>1e6){MicroModal.show("modal-alert");return false}if(file&&file.type.startsWith("image/")){const reader=new FileReader;reader.fileName=file.name;reader.readAsDataURL(file);reader.onload=function(e){var uim=document.querySelectorAll(".uim");for(var i=0;i<uim.length;i++){uim[i].classList.add("D(n)")}document.querySelector(".loading-img").classList.remove("D(n)");const iEl=document.createElement("img");iEl.src=e.target.result;iEl.onload=function(e){const canvas=document.createElement("canvas");canvas.width=e.target.width;canvas.height=e.target.height;const ctx=canvas.getContext("2d");ctx.drawImage(e.target,0,0,canvas.width,canvas.height);const srcEncoded=ctx.canvas.toDataURL("image/jpeg",.6);$('input[name="pic1"]').remove();var newinput=document.createElement("input");newinput.type="hidden";newinput.name="pic1";newinput.value=srcEncoded;document.getElementById("background").appendChild(newinput);fn.api.post(fn.path.UPL_PATH,fn.serializedToJson("#background")).done(function(e){window.location.reload()})}}}})}};